{% extends 'base.html' %}
{% block title %}Drag & Drop Demo - MITS Cloud{% endblock %}
{% block content %}
<div class="max-w-6xl mx-auto">
  <div class="bg-white p-6 rounded-xl shadow mb-6">
    <h1 class="text-3xl font-bold text-primary mb-4">Drag & Drop Functionality Demo</h1>
    <p class="text-slate-600 mb-6">This page demonstrates all the drag and drop features available in MITS Cloud.</p>
    
    <div class="grid md:grid-cols-2 gap-6">
      <div class="space-y-4">
        <h2 class="text-xl font-semibold text-primary">Features Available:</h2>
        <ul class="space-y-2 text-slate-600">
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Drag files from computer to upload areas</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Drag entire folders with structure preservation</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Drag files between folders for organization</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Enhanced grid view with drag and drop sorting</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Visual feedback with animations and indicators</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Progress indicators for uploads</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Global drag overlay for easy targeting</span>
          </li>
          <li class="flex items-center gap-2">
            <span class="text-green-600">✓</span>
            <span>Drop zone indicators and visual cues</span>
          </li>
        </ul>
      </div>
      
      <div class="space-y-4">
        <h2 class="text-xl font-semibold text-primary">How to Use:</h2>
        <ol class="space-y-2 text-slate-600 list-decimal list-inside">
          <li>Navigate to Dashboard or Faculty page</li>
          <li>Drag files from your computer onto any blue highlighted area</li>
          <li>For folders, drag them onto other folders to reorganize</li>
          <li>Watch for visual feedback and progress indicators</li>
          <li>Files will be automatically uploaded to the correct session</li>
        </ol>
      </div>
    </div>
  </div>

  <!-- Demo Upload Areas -->
  <div class="grid md:grid-cols-2 gap-6 mb-6">
    <!-- File Upload Demo -->
    <div class="bg-white p-6 rounded-xl shadow upload-zone">
      <h3 class="text-lg font-semibold text-primary mb-4">File Upload Demo</h3>
      <div class="text-sm text-gray-500 mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
        <div class="flex items-center gap-2">
          <span class="text-blue-600">💡</span>
          <span>Drag files here to see the upload functionality</span>
        </div>
      </div>
      
      <form class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-2">Session</label>
          <select class="w-full border rounded px-3 py-2">
            <option>Demo Session 2024-25</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">Department</label>
          <select class="w-full border rounded px-3 py-2">
            <option>Computer Science Engineering</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2">File Input (also accepts drag & drop)</label>
          <input type="file" class="w-full border rounded px-3 py-2" multiple>
        </div>
        
        <div class="flex gap-2">
          <button type="button" class="flex-1 bg-primary text-white rounded py-2 hover:bg-blue-700">
            Upload Files
          </button>
        </div>
      </form>
    </div>

    <!-- Folder Organization Demo -->
    <div class="bg-white p-6 rounded-xl shadow upload-area">
      <h3 class="text-lg font-semibold text-primary mb-4">Folder Organization Demo</h3>
      <div class="text-sm text-gray-500 mb-4 p-3 bg-green-50 rounded-lg border border-green-200">
        <div class="flex items-center gap-2">
          <span class="text-green-600">📁</span>
          <span>Drag folders here to organize them</span>
        </div>
      </div>
      
      <div class="space-y-3">
        <div class="folder-item border rounded-lg p-3 bg-amber-50" data-folder-id="1" draggable="true">
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-amber-200 text-amber-700 flex items-center justify-center">📁</div>
            <div>
              <div class="font-medium">Sample Folder 1</div>
              <div class="text-xs text-slate-500">3 files • 2 subfolders</div>
            </div>
          </div>
        </div>
        
        <div class="folder-item border rounded-lg p-3 bg-amber-50" data-folder-id="2" draggable="true">
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-amber-200 text-amber-700 flex items-center justify-center">📁</div>
            <div>
              <div class="font-medium">Sample Folder 2</div>
              <div class="text-xs text-slate-500">5 files • 1 subfolder</div>
            </div>
          </div>
        </div>
        
        <div class="folder-item border rounded-lg p-3 bg-amber-50" data-folder-id="3" draggable="true">
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-amber-200 text-amber-700 flex items-center justify-center">📁</div>
            <div>
              <div class="font-medium">Sample Folder 3</div>
              <div class="text-xs text-slate-500">2 files • 0 subfolders</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="text-center py-8 text-gray-500 hidden" id="demo-empty-drop-zone">
        <div class="text-4xl mb-2">📁</div>
        <div class="text-lg font-medium">Drop folders here to organize</div>
        <div class="text-sm">Drag folders between each other to reorganize</div>
      </div>
    </div>
  </div>

  <!-- Enhanced Grid Demo -->
  <div class="bg-white p-6 rounded-xl shadow">
    <h3 class="text-lg font-semibold text-primary mb-4">Enhanced Grid View Demo</h3>
    <p class="text-sm text-gray-600 mb-4">This demonstrates the new grid drag and drop functionality with sorting and visual feedback.</p>
    
    <!-- Demo Grid -->
    <div id="demo-grid" class="p-4 grid md:grid-cols-2 lg:grid-cols-3 gap-3 upload-area drive-grid bg-gray-50 rounded-lg">
      <div class="col-span-full text-center py-8 text-gray-500 hidden" id="demo-empty-drop-zone">
        <div class="text-4xl mb-2">📁</div>
        <div class="text-lg font-medium">Drop files here to upload</div>
        <div class="text-sm">Or drag items to reorganize</div>
      </div>
      
      <!-- Demo Files -->
      <div class="border rounded-lg p-3 hover:shadow bg-white file-item grid-item-sortable" data-file-id="demo1" draggable="true">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded bg-blue-100 text-blue-700 flex items-center justify-center">📄</div>
          <div class="min-w-0 flex-1">
            <div class="font-medium truncate">Document.pdf</div>
            <div class="text-xs text-slate-500">2.3 MB • 15 downloads</div>
          </div>
        </div>
      </div>
      
      <div class="border rounded-lg p-3 hover:shadow bg-white file-item grid-item-sortable" data-file-id="demo2" draggable="true">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded bg-green-100 text-green-700 flex items-center justify-center">📊</div>
          <div class="min-w-0 flex-1">
            <div class="font-medium truncate">Spreadsheet.xlsx</div>
            <div class="text-xs text-slate-500">1.8 MB • 8 downloads</div>
          </div>
        </div>
      </div>
      
      <div class="border rounded-lg p-3 hover:shadow bg-white file-item grid-item-sortable" data-file-id="demo3" draggable="true">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded bg-purple-100 text-purple-700 flex items-center justify-center">🎨</div>
          <div class="min-w-0 flex-1">
            <div class="font-medium truncate">Presentation.pptx</div>
            <div class="text-xs text-slate-500">5.2 MB • 23 downloads</div>
          </div>
        </div>
      </div>
      
      <!-- Demo Folders -->
      <div class="group border rounded-lg p-3 hover:shadow bg-white folder-item grid-item-sortable" data-folder-id="demo4" draggable="true">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded bg-amber-100 text-amber-700 flex items-center justify-center cursor-pointer">📁</div>
          <div class="min-w-0 flex-1 cursor-pointer">
            <div class="font-medium truncate flex items-center gap-2">
              Project Files
              <span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded">Public</span>
            </div>
            <div class="text-xs text-slate-500">3 folders • 12 files</div>
          </div>
        </div>
      </div>
      
      <div class="group border rounded-lg p-3 hover:shadow bg-white folder-item grid-item-sortable" data-folder-id="demo5" draggable="true">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded bg-amber-100 text-amber-700 flex items-center justify-center cursor-pointer">📁</div>
          <div class="min-w-0 flex-1 cursor-pointer">
            <div class="font-medium truncate flex items-center gap-2">
              Resources
              <span class="text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded">Private</span>
            </div>
            <div class="text-xs text-slate-500">1 folder • 7 files</div>
          </div>
        </div>
      </div>
      
      <div class="group border rounded-lg p-3 hover:shadow bg-white folder-item grid-item-sortable" data-folder-id="demo6" draggable="true">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded bg-amber-100 text-amber-700 flex items-center justify-center cursor-pointer">📁</div>
          <div class="min-w-0 flex-1 cursor-pointer">
            <div class="font-medium truncate flex items-center gap-2">
              Templates
              <span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded">Public</span>
            </div>
            <div class="text-xs text-slate-500">0 folders • 4 files</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="mt-4 text-sm text-gray-600">
      <div class="flex items-center gap-2 mb-2">
        <span class="text-blue-600">💡</span>
        <span class="font-medium">Try these interactions:</span>
      </div>
      <ul class="space-y-1 ml-6">
        <li>• Drag files from your computer onto the grid above</li>
        <li>• Drag folders onto other folders to reorganize</li>
        <li>• Drag items within the grid to reorder them</li>
        <li>• Watch for visual feedback and drop indicators</li>
      </ul>
    </div>
  </div>

  <!-- Interactive Demo -->
  <div class="bg-white p-6 rounded-xl shadow">
    <h3 class="text-lg font-semibold text-primary mb-4">Basic Drop Zones</h3>
    <div class="grid md:grid-cols-3 gap-4">
      <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg drag-drop-zone">
        <div class="text-2xl mb-2">📄</div>
        <div class="font-medium">Drop Files Here</div>
        <div class="text-sm text-gray-500">Single or multiple files</div>
      </div>
      
      <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg drag-drop-zone">
        <div class="text-2xl mb-2">📁</div>
        <div class="font-medium">Drop Folders Here</div>
        <div class="text-sm text-gray-500">Entire folder structures</div>
      </div>
      
      <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg drag-drop-zone">
        <div class="text-2xl mb-2">🔄</div>
        <div class="font-medium">Reorganize Here</div>
        <div class="text-sm text-gray-500">Move items between folders</div>
      </div>
    </div>
  </div>

  <!-- Browser Support -->
  <div class="mt-6 bg-white p-6 rounded-xl shadow">
    <h3 class="text-lg font-semibold text-primary mb-4">Browser Support</h3>
    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <h4 class="font-medium text-green-600 mb-2">Fully Supported</h4>
        <ul class="space-y-1 text-sm text-slate-600">
          <li>• Chrome 60+</li>
          <li>• Firefox 55+</li>
          <li>• Safari 12+</li>
          <li>• Edge 79+</li>
        </ul>
      </div>
      <div>
        <h4 class="font-medium text-yellow-600 mb-2">Limited Support</h4>
        <ul class="space-y-1 text-sm text-slate-600">
          <li>• Internet Explorer (not recommended)</li>
          <li>• Older mobile browsers</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
  // Initialize demo-specific drag and drop
  document.addEventListener('DOMContentLoaded', () => {
    // Add demo-specific drop zones
    const demoZones = document.querySelectorAll('.drag-drop-zone');
    demoZones.forEach(zone => {
      if (window.dragDropManager) {
        window.dragDropManager.addDropZone(zone, null, 'upload');
      }
    });
    
    // Setup demo grid functionality
    const demoGrid = document.getElementById('demo-grid');
    if (demoGrid && window.dragDropManager) {
      window.dragDropManager.setupGridDragDrop();
    }
    
    // Make demo folders and files draggable
    const demoFolders = document.querySelectorAll('.folder-item');
    demoFolders.forEach(folder => {
      if (window.dragDropManager) {
        window.dragDropManager.makeDraggable(folder);
        window.dragDropManager.makeDropTarget(folder);
      }
    });
    
    const demoFiles = document.querySelectorAll('.file-item');
    demoFiles.forEach(file => {
      if (window.dragDropManager) {
        window.dragDropManager.makeFileDraggable(file);
      }
    });
    
    // Demo-specific file upload handler
    if (window.dragDropManager) {
      const originalUploadFiles = window.dragDropManager.uploadFilesToDrive;
      window.dragDropManager.uploadFilesToDrive = function(files, element) {
        // Show demo message instead of actual upload
        this.showToast(`Demo: Would upload ${files.length} file(s) to the grid`, 'info');
        
        // Simulate upload progress
        this.showUploadProgress(files.length);
        setTimeout(() => {
          this.hideUploadProgress();
          this.showToast('Demo upload completed!', 'success');
        }, 2000);
      };
    }
    
    // Demo-specific folder move handler
    if (window.dragDropManager) {
      const originalHandleFolderMove = window.dragDropManager.handleFolderMove;
      window.dragDropManager.handleFolderMove = function(data, targetElement) {
        this.showToast(`Demo: Would move "${data.name}" to target folder`, 'info');
        
        // Simulate move with visual feedback
        setTimeout(() => {
          this.showToast('Demo move completed!', 'success');
        }, 1000);
      };
    }
    
    // Demo-specific file move handler
    if (window.dragDropManager) {
      const originalHandleFileMove = window.dragDropManager.handleFileMove;
      window.dragDropManager.handleFileMove = function(data, targetElement) {
        this.showToast(`Demo: Would move "${data.name}" to target folder`, 'info');
        
        // Simulate move with visual feedback
        setTimeout(() => {
          this.showToast('Demo move completed!', 'success');
        }, 1000);
      };
    }
  });
</script>
{% endblock %}
